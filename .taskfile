#!/usr/bin/env bash

set -e
function eachPackageDo() {
    cd packages
    for fold in */; do 
        cd $fold
        $1
        cd ..
    done 
    cd ..
}

function clean(){
    rm -rf dist
    eachPackageDo "rm -rf dist"
}

function run_test(){
    cd packages/ts-compiler
    npm run test:hero
}


function post_install() {
    eachPackageDo "npm i"
}

TIMEFORMAT="Task completed in %3lR"
time ${@:-default}

# node -e 'console.log(JSON.stringify(require(\'./dist/src/tsconfig.js\').getTSConfig(false, {})))' | jq .